
/*
*
*  I7 Kits
*
*/

const customI7 = {
    "text": "Custom",
    "children": [
        {
            "id": "CGATCATG",
            "text": "CGATCATG"
        },
        {
            "id": "TAGATCCT",
            "text": "TAGATCCT"
        },
        {
            "id": "TTACTGTC",
            "text": "TTACTGTC"
        },
        {
            "id": "GGCATAGG",
            "text": "GGCATAGG"
        },
        {
            "id": "CAAGGCGA",
            "text": "CAAGGCGA"
        },
        {
            "id": "GACGCTAT",
            "text": "GACGCTAT"
        }

    ]
}

const truSeqSingleIndexSetABI7 = {
    "text": "TruSeq Single Index Set A B",
    "children": [
        {
            "id": "ATCACG", // 1
            "text": "ATCACG"
        },
        {
            "id": "CGATGT", // 2
            "text": "CGATGT"
        },
        {
            "id": "TTAGGC", // 3
            "text": "TTAGGC"
        },
        {
            "id": "TGACCA", // 4
            "text": "TGACCA"
        },
        {
            "id": "ACAGTG", // 5
            "text": "ACAGTG"
        },
        {
            "id": "GCCAAT", // 6
            "text": "GCCAAT"
        },
        {
            "id": "CAGATC", // 7
            "text": "CAGATC"
        },
        {
            "id": "ACTTGA", // 8
            "text": "ACTTGA"
        },
        {
            "id": "GATCAG", // 9
            "text": "GATCAG"
        },
        {
            "id": "TAGCTT", // 10
            "text": "TAGCTT"
        },
        {
            "id": "GGCTAC", // 11
            "text": "GGCTAC"
        },
        {
            "id": "CTTGTA", // 12
            "text": "CTTGTA"
        },
        {
            "id": "AGTCAA", // 13
            "text": "AGTCAA"
        },
        {
            "id": "AGTTCC", // 14
            "text": "AGTTCC"
        },
        {
            "id": "ATGTCA", // 15
            "text": "ATGTCA"
        },
        {
            "id": "CCGTCC", // 16
            "text": "CCGTCC"
        },
        {
            "id": "GTCCGC", // 18
            "text": "GTCCGC"
        },
        {
            "id": "GTGAAA", // 19
            "text": "GTGAAA"
        },
        {
            "id": "GTGGCC", // 20
            "text": "GTGGCC"
        },
        {
            "id": "GTTTCG", // 21
            "text": "GTTTCG"
        },
        {
            "id": "CGTACG", // 22
            "text": "CGTACG"
        },
        {
            "id": "GAGTGG", // 23
            "text": "GAGTGG"
        },
        {
            "id": "ACTGAT", // 25
            "text": "ACTGAT"
        },
        {
            "id": "ATTCCT", // 27
            "text": "ATTCCT"
        }
    ]
}

const truSeqSingleIndexSetAI7 = {
    "text": "TruSeq Single Index Set A",
    "children": [

        {
            "id": "CGATGT", // 2
            "text": "CGATGT"
        },
        {
            "id": "TGACCA", // 4
            "text": "TGACCA"
        },
        {
            "id": "ACAGTG", // 5
            "text": "ACAGTG"
        },
        {
            "id": "GCCAAT", // 6
            "text": "GCCAAT"
        },
        {
            "id": "CAGATC", // 7
            "text": "CAGATC"
        },
        {
            "id": "CTTGTA", // 12
            "text": "CTTGTA"
        },
        {
            "id": "AGTCAA", // 13
            "text": "AGTCAA"
        },
        {
            "id": "AGTTCC", // 14
            "text": "AGTTCC"
        },
        {
            "id": "ATGTCA", // 15
            "text": "ATGTCA"
        },
        {
            "id": "CCGTCC", // 16
            "text": "CCGTCC"
        },
        {
            "id": "GTCCGC", // 18
            "text": "GTCCGC"
        },
        {
            "id": "GTGAAA", // 19
            "text": "GTGAAA"
        }
    ]
}

const truSeqSingleIndexSetBI7 = {
    "text": "TruSeq Single Index Set B",
    "children": [
        {
            "id": "ATCACG", // 1
            "text": "ATCACG"
        },
        {
            "id": "TTAGGC", // 3
            "text": "TTAGGC"
        },
        {
            "id": "ACTTGA", // 8
            "text": "ACTTGA"
        },
        {
            "id": "GATCAG", // 9
            "text": "GATCAG"
        },
        {
            "id": "TAGCTT", // 10
            "text": "TAGCTT"
        },
        {
            "id": "GGCTAC", // 11
            "text": "GGCTAC"
        },
        {
            "id": "GTGGCC", // 20
            "text": "GTGGCC"
        },
        {
            "id": "GTTTCG", // 21
            "text": "GTTTCG"
        },
        {
            "id": "CGTACG", // 22
            "text": "CGTACG"
        },
        {
            "id": "GAGTGG", // 23
            "text": "GAGTGG"
        },
        {
            "id": "ACTGAT", // 25
            "text": "ACTGAT"
        },
        {
            "id": "ATTCCT", // 27
            "text": "ATTCCT"
        }
    ]
}

const otherTruSeqI7 = {
    "text": "TruSeq",
    "children": [
        {
            "id": "CCGCGGTT",
            "text": "UDI0001"
        },
        {
            "id": "TTATAACC",
            "text": "UDI0002"
        },
        {
            "id": "GGACTTGG",
            "text": "UDI0003"
        },
        {
            "id": "AAGTCCAA",
            "text": "UDI0004"
        },
        {
            "id": "ATCCACTG",
            "text": "UDI0005"
        },
        {
            "id": "GCTTGTCA",
            "text": "UDI0006"
        },
        {
            "id": "CAAGCTAG",
            "text": "UDI0007"
        },
        {
            "id": "TGGATCGA",
            "text": "UDI0008"
        },
        {
            "id": "AGTTCAGG",
            "text": "UDI0009"
        },
        {
            "id": "GACCTGAA",
            "text": "UDI0010"
        },
        {
            "id": "TCTCTACT",
            "text": "UDI0011"
        },
        {
            "id": "CTCTCGTC",
            "text": "UDI0012"
        },
        {
            "id": "CCAAGTCT",
            "text": "UDI0013"
        },
        {
            "id": "TTGGACTC",
            "text": "UDI0014"
        },
        {
            "id": "GGCTTAAG",
            "text": "UDI0015"
        },
        {
            "id": "AATCCGGA",
            "text": "UDI0016"
        },
        {
            "id": "TAATACAG",
            "text": "UDI0017"
        },
        {
            "id": "CGGCGTGA",
            "text": "UDI0018"
        },
        {
            "id": "ATGTAAGT",
            "text": "UDI0019"
        },
        {
            "id": "GCACGGAC",
            "text": "UDI0020"
        },
        {
            "id": "GGTACCTT",
            "text": "UDI0021"
        },
        {
            "id": "AACGTTCC",
            "text": "UDI0022"
        },
        {
            "id": "GCAGAATT",
            "text": "UDI0023"
        },
        {
            "id": "ATGAGGCC",
            "text": "UDI0024"
        }

    ]
}

const missionBioI7 = {
    "text": "MissionBio",
    "children": [
        {
            "id": "CTGATCGT",
            "text": "CTGATCGT"
        },
        {
            "id": "ACTCTCGA",
            "text": "ACTCTCGA"
        },
        {
            "id": "TGAGCTAG",
            "text": "TGAGCTAG"
        },
        {
            "id": "GAGACGAT",
            "text": "GAGACGAT"
        },
        {
            "id": "CTTGTCGA",
            "text": "CTTGTCGA"
        },
        {
            "id": "TTCCAAGG",
            "text": "TTCCAAGG"
        },
        {
            "id": "CGCATGAT",
            "text": "CGCATGAT"
        },
        {
            "id": "ACGGAACA",
            "text": "ACGGAACA"
        }
    ]
}

const idtI7 = {
    "text": "IDT",
    "children": [
        {
            "id": "CGGCTAAT",
            "text": "CGGCTAAT"
        },
        {
            "id": "ATCGATCG",
            "text": "ATCGATCG"
        },
        {
            "id": "GCAAGATC",
            "text": "GCAAGATC"
        },
        {
            "id": "GCTATCCT",
            "text": "GCTATCCT"
        },
        {
            "id": "TACGCTAC",
            "text": "TACGCTAC"
        },
        {
            "id": "TGGACTCT",
            "text": "TGGACTCT"
        },
        {
            "id": "AGAGTAGC",
            "text": "AGAGTAGC"
        },
        {
            "id": "ATCCAGAG",
            "text": "ATCCAGAG"
        }
    ]
}

/*
*
*  I5 Kits
*
*/

const customI5 = {
    "text": "Custom",
    "children": [
        {
            "id": "AAGTAGAG",
            "text": "AAGTAGAG"
        },
        {
            "id": "CATGCTTA",
            "text": "CATGCTTA"
        },
        {
            "id": "AGTTGCTT",
            "text": "AGTTGCTT"
        },
        {
            "id": "GCACATCT",
            "text": "GCACATCT"
        },
        {
            "id": "TGCTCGAC",
            "text": "TGCTCGAC"
        },
        {
            "id": "AGCAATTC",
            "text": "AGCAATTC"
        },
        {
            "id": "AGTTGCTT",
            "text": "AGTTGCTT"
        }
    ]
}

const otherTruSeqI5 = {
    "text": "TruSeq",
    "children": [
        {
            "id": "AGCGCTAG",
            "text": "UDI0001"
        },
        {
            "id": "GATATCGA",
            "text": "UDI0002"
        },
        {
            "id": "CGCAGACG",
            "text": "UDI0003"
        },
        {
            "id": "TATGAGTA",
            "text": "UDI0004"
        },
        {
            "id": "AGGTGCGT",
            "text": "UDI0005"
        },
        {
            "id": "GAACATAC",
            "text": "UDI0006"
        },
        {
            "id": "ACATAGCG",
            "text": "UDI0007"
        },
        {
            "id": "GTGCGATA",
            "text": "UDI0008"
        },
        {
            "id": "CCAACAGA",
            "text": "UDI0009"
        },
        {
            "id": "TTGGTGAG",
            "text": "UDI0010"
        },
        {
            "id": "CGCGGTTC",
            "text": "UDI0011"
        },
        {
            "id": "TATAACCT",
            "text": "UDI0012"
        },
        {
            "id": "AAGGATGA",
            "text": "UDI0013"
        },
        {
            "id": "GGAAGCAG",
            "text": "UDI0014"
        },
        {
            "id": "TCGTGACC",
            "text": "UDI0015"
        },
        {
            "id": "CTACAGTT",
            "text": "UDI0016"
        },
        {
            "id": "ATATTCAC",
            "text": "UDI0017"
        },
        {
            "id": "GCGCCTGT",
            "text": "UDI0018"
        },
        {
            "id": "ACTCTATG",
            "text": "UDI0019"
        },
        {
            "id": "GTCTCGCA",
            "text": "UDI0020"
        },
        {
            "id": "AAGACGTC",
            "text": "UDI0021"
        },
        {
            "id": "GGAGTACT",
            "text": "UDI0022"
        },
        {
            "id": "ACCGGCCA",
            "text": "UDI0023"
        },
        {
            "id": "GTTAATTG",
            "text": "UDI0024"
        }
    ]
}

const missionBioI5 = {
    "text": "MissionBio",
    "children": [
        {
            "id": "ATATGCGC",
            "text": "ATATGCGC"
        },
        {
            "id": "TGGTACAG",
            "text": "TGGTACAG"
        },
        {
            "id": "AACCGTTC",
            "text": "AACCGTTC"
        },
        {
            "id": "TAACCGGT",
            "text": "TAACCGGT"
        },
        {
            "id": "GAACATCG",
            "text": "GAACATCG"
        },
        {
            "id": "CCTTGTAG",
            "text": "CCTTGTAG"
        },
        {
            "id": "TCAGGCTT",
            "text": "TCAGGCTT"
        },
        {
            "id": "GTTCTCGT",
            "text": "GTTCTCGT"
        }
    ]
}

const idtI5 = {
    "text": "IDT",
    "children": [
        {
            "id": "AGAACGAG",
            "text": "AGAACGAG"
        },
        {
            "id": "TGCTTCCA",
            "text": "TGCTTCCA"
        },
        {
            "id": "CTTCGACT",
            "text": "CTTCGACT"
        },
        {
            "id": "CACCTGTT",
            "text": "CACCTGTT"
        },
        {
            "id": "ATCACACG",
            "text": "ATCACACG"
        },
        {
            "id": "CCGTAAGA",
            "text": "CCGTAAGA"
        },
        {
            "id": "TACGCCTT",
            "text": "TACGCCTT"
        },
        {
            "id": "CGACGTTA",
            "text": "CGACGTTA"
        }
    ]
}

/*
*
* Exported Index kits
*
*/

const blankKit = {
    "id": "",
    "text": "None"
}

const otherKit = {
    "text": "Other",
    "children": []

}

export const customIndexKit = {
    "i7Barcodes": [
        blankKit,
        customI7,
        otherKit
    ],

    "i5Barcodes": [
        blankKit,
        customI5,
        otherKit
    ],

    "sequence_length": 8,
    "validReadTypes": 'both'

}

export const truSeqSingleIndexSetAKit = {
    "i7Barcodes": [
        blankKit,
        truSeqSingleIndexSetAI7,
        otherKit
    ],

    "sequence_length": 6,
    "validReadTypes": 'single',
    "adapter": "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA",
    "adapterRead2": "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"

}

export const truSeqSingleIndexSetBKit = {
    "i7Barcodes": [
        blankKit,
        truSeqSingleIndexSetBI7,
        otherKit
    ],

    "sequence_length": 6,
    "validReadTypes": 'single',
    "adapter": "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA",
    "adapterRead2": "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"

}

export const truSeqSingleIndexSetABKit = {
    "i7Barcodes": [
        blankKit,
        truSeqSingleIndexSetABI7,
        otherKit
    ],

    "sequence_length": 6,
    "validReadTypes": 'single',
    "adapter": "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA",
    "adapterRead2": "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"

}

export const missionBioIndexKit = {
    "i7Barcodes": [
        blankKit,
        missionBioI7,
        otherKit
    ],

    "i5Barcodes": [
        blankKit,
        missionBioI5,
        otherKit
    ],

    "sequence_length": 8,
    "validReadTypes": 'both'
    
}

export let selectReferenceData = {

    "results": [
        blankKit,
        {
            "text": "Ref Group",
            "children": [
                {
                    "id": "Reference1",
                    "text": "Reference 1"
                },
                {
                    "id": "Reference2",
                    "text": "Reference 2"
                }
            ]
        },
        otherKit

    ]

}

export let idtILMNNexteraDNAUDIndexesSetABCD = {
    "i7Barcodes": [blankKit],
    "i5Barcodes": [blankKit],
    "sequence_length": 10,
    "validReadTypes": 'both',
    "adapter": "CTGTCTCTTATACACATCT"

}

export let idtILMNNexteraDNAUDIndexesSetA = {
    "i7Barcodes": [blankKit],
    "i5Barcodes": [blankKit],
    "sequence_length": 10,
    "validReadTypes": 'both',
    "adapter": "CTGTCTCTTATACACATCT"

}

export let idtILMNNexteraDNAUDIndexesSetB = {
    "i7Barcodes": [blankKit],
    "i5Barcodes": [blankKit],
    "sequence_length": 10,
    "validReadTypes": 'both',
    "adapter": "CTGTCTCTTATACACATCT"

}

export let idtILMNNexteraDNAUDIndexesSetC = {
    "i7Barcodes": [blankKit],
    "i5Barcodes": [blankKit],
    "sequence_length": 10,
    "validReadTypes": 'both',
    "adapter": "CTGTCTCTTATACACATCT"

}

export let idtILMNNexteraDNAUDIndexesSetD = {
    "i7Barcodes": [blankKit],
    "i5Barcodes": [blankKit],
    "sequence_length": 10,
    "validReadTypes": 'both',
    "adapter": "CTGTCTCTTATACACATCT"

}



function getNexteraXT() {
    fetch('/libraryKits/nextera-dna-udi-lrm-library-kit-definition-iSeq-MiSeq-nextera-xt-set-a-b-c-d-2x151-384-samples.tsv', {
        method: 'GET',
        headers: {
            "Content-Type": "application/json"
        }
    })
        .then(response => response.text())
        .then(text => {

            // split data into sections
            let kitArr = text.split('[Resources]')[0].split('\r\n')
            kitArr.shift()
            kitArr.pop()
            kitArr.pop()
            kitArr = kitArr.map(x => x.split('\t'))
            let resourcesArr = text.split('[Resources]')[1].split('[Indices]')[0].split('\r\n')
            resourcesArr.shift()
            resourcesArr.pop()
            resourcesArr = resourcesArr.map(x => x = x.split('\t'))
            let indexesArr = text.split('[Indices]')[1].split('[SupportedModules]')[0].split('\r\n')
            indexesArr.shift()
            indexesArr.pop()
            indexesArr.pop()
            indexesArr.pop()
            indexesArr = indexesArr.map(x => x = x.split('\t'))

            // console.log(kitArr)
            // console.log(resourcesArr)
            // console.log(indexesArr)

            // populate i7 and i5 list with barcodes
            let tempI7List = []
            let tempI5List = []
            indexesArr.forEach(x => {
                if (x.length < 1) { return } // skip blank row in middle

                if (x[2] == 1) {
                    tempI7List.push({
                        "id": x[1],
                        "text": x[0]
                    })
                }

                if (x[2] == 2) {
                    tempI5List.push({
                        "id": x[1],
                        "text": x[0]
                    })
                }

            })

            idtILMNNexteraDNAUDIndexesSetABCD.i7Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set A B C D",
                "children": tempI7List
            })

            idtILMNNexteraDNAUDIndexesSetABCD.i5Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set A B C D",
                "children": tempI5List
            })

            idtILMNNexteraDNAUDIndexesSetA.i7Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set A",
                "children": tempI7List.slice(0,96)
            })

            idtILMNNexteraDNAUDIndexesSetA.i5Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set A",
                "children": tempI5List.slice(0,96)
            })

            idtILMNNexteraDNAUDIndexesSetB.i7Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set B",
                "children": tempI7List.slice(96,192)
            })

            idtILMNNexteraDNAUDIndexesSetB.i5Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set B",
                "children": tempI5List.slice(96,192)
            })

            idtILMNNexteraDNAUDIndexesSetC.i7Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set C",
                "children": tempI7List.slice(192,288)
            })

            idtILMNNexteraDNAUDIndexesSetC.i5Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set C",
                "children": tempI5List.slice(192,288)
            })
            idtILMNNexteraDNAUDIndexesSetD.i7Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set D",
                "children": tempI7List.slice(288,384)
            })

            idtILMNNexteraDNAUDIndexesSetD.i5Barcodes.push({
                "text": "IDT-ILMN Nextera DNA UD Indexes Set D",
                "children": tempI5List.slice(288,384)
            })
        })
}
getNexteraXT()
